# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–µ–≥–∞–º

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ "–ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ –º–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ —Ç—ã –∑–Ω–∞–µ—à—å" –±–æ—Ç –æ—Ç–≤–µ—á–∞–ª "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç", —Ö–æ—Ç—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∏ –∑–∞–ø–∏—Å–∏ —Å —Ç–µ–≥–æ–º "#–∑–¥–æ—Ä–æ–≤—å–µ".

## –ü—Ä–∏—á–∏–Ω–∞
–ü–æ–∏—Å–∫ –≤ `SmartSearchEngine` –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª —Ç–µ–≥–∏ - –º–µ—Ç–æ–¥ `search_comprehensive` –∏—Å–∫–∞–ª —Ç–æ–ª—å–∫–æ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º –∏ —Ç–µ–∫—Å—Ç—É, –Ω–æ –Ω–µ –ø–æ —Ç–µ–≥–∞–º.

## –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–µ–≥–∞–º
```python
def search_entries_by_tags(self, user_id: int, tag_keywords: List[str], limit: int = 10) -> List[Dict]:
    """–ü–æ–∏—Å–∫ –∑–∞–ø–∏—Å–µ–π –ø–æ —Ç–µ–≥–∞–º"""
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º –≤ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫
```python
# –í –º–µ—Ç–æ–¥–µ search_comprehensive –¥–æ–±–∞–≤–ª–µ–Ω –±–ª–æ–∫:
if tag_keywords:
    tag_entries = self.search_entries_by_tags(user_id, tag_keywords)
    # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏
    existing_entry_ids = {e['id'] for e in results['entries_found']}
    for entry in tag_entries:
        if entry['id'] not in existing_entry_ids:
            results['entries_found'].append(entry)
    results['search_stats']['search_types_used'].append('tag_search')
```

### 3. –£–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ç–∏–ø 'health' –≤ `query_patterns`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–ª–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è —Å–ª–æ–≤ (–≤–µ—Å ‚Üí –∑–¥–æ—Ä–æ–≤—å–µ)

### 4. –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å–ª–æ–≤–∞–º
```python
# –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–∏—Å–∫ –ø–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å–ª–æ–≤–∞–º –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è
if clean_kw in ['–≤–µ—Å', '–≤–µ—Å–µ', '–≤–µ—Å–∞', '–≤–µ—Å–æ–º', '–≤–µ—Å—É', '–≤–µ—Å–∏–ª', '–≤–µ—Å–∏–ª–∞']:
    tag_conditions.append("t.name LIKE ?")
    tag_params.append('%–∑–¥–æ—Ä–æ–≤%')
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå "–ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ –º–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ —Ç—ã –∑–Ω–∞–µ—à—å" ‚Üí "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
- ‚ùå –ü–æ–∏—Å–∫ –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª —Ç–µ–≥–∏
- ‚ùå –°–ª–æ–≤–∞ "–≤–µ—Å", "–∑–¥–æ—Ä–æ–≤—å–µ" –Ω–µ —Å–≤—è–∑—ã–≤–∞–ª–∏—Å—å —Å —Ç–µ–≥–æ–º "#–∑–¥–æ—Ä–æ–≤—å–µ"

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ "–ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ –º–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ —Ç—ã –∑–Ω–∞–µ—à—å" ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç 4 –∑–∞–ø–∏—Å–∏ –æ –≤–µ—Å–µ
- ‚úÖ –ü–æ–∏—Å–∫ –≤–∫–ª—é—á–∞–µ—Ç `tag_search` –≤ —Ç–∏–ø—ã –ø–æ–∏—Å–∫–∞
- ‚úÖ –°–ª–æ–≤–∞ "–≤–µ—Å", "–∑–¥–æ—Ä–æ–≤—å–µ" –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Å —Ç–µ–≥–æ–º "#–∑–¥–æ—Ä–æ–≤—å–µ"
- ‚úÖ –ù–∞–π–¥–µ–Ω—ã –∑–∞–ø–∏—Å–∏: "–°–∫–æ–ª—å–∫–æ —è –≤–µ—Å–∏–ª –≤ 2024 –≥–æ–¥—É", "–º–æ–π –≤–µ—Å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 86,6 –∫–≥" –∏ –¥—Ä.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –¢–µ—Å—Ç –ø–æ–∫–∞–∑–∞–ª:
üè∑Ô∏è –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º '–∑–¥–æ—Ä–æ–≤—å–µ': –Ω–∞–π–¥–µ–Ω–æ 4 –∑–∞–ø–∏—Å–µ–π
üîç –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫: –Ω–∞–π–¥–µ–Ω–æ 4 –∑–∞–ø–∏—Å–µ–π
üìä –¢–∏–ø—ã –ø–æ–∏—Å–∫–∞: ['entities_health', 'entities_person', 'entities_general', 'tag_search', 'entries_by_text']
```

## –°—Ç–∞—Ç—É—Å
‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ –∑–¥–æ—Ä–æ–≤—å–µ.
